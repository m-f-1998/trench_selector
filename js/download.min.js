/*global document, jQuery, console, location, window, setTimeout, prompt*/
/*global basketProducts, storeAccess, accessArray, selectedAdditions*/

/* CONFIRM PROJECT REFERENCE PRIOR TO GENERATING SPECIFICATION */
function enterProjectID() { // eslint-disable-line no-unused-vars
    'use strict';
    var project;

    project = prompt("Please Enter Your Custom Project Reference", "");

    if (project !== null) { return project; }
    return false;

}

/* GENERATE OF SPECIFICATION */
function downloadPDF(custID, projectID) { // eslint-disable-line no-unused-vars
    'use strict';
    var dataString;

    /* MARK: GOOGLE ANALYTICS */
    // TO TRACK productType; length; width; depth; grilleType
    //    - everything in basketProducts; selectedAdditions

    jQuery(document).ready(function () {
        // IF NO CUSTOMER ID IS GIVEN RETURN
        if (custID === false) { return; }

        if (projectID !== 'download') {
            location.href = //MAIL-TO;
            return;
        }

        basketProducts[0][8] = parseFloat(
            document.getElementById("additionalCosts").innerHTML.substring(19, document.getElementById("additionalCosts").innerHTML.length)
        );
        storeAccess(document.getElementById("access")); //RE-EVALULATE ACCESSORIES

        dataString = 'products=' + JSON.stringify(basketProducts) + '&access=' + JSON.stringify(accessArray) + '&custom=' + JSON.stringify(selectedAdditions) + '&custID=' + custID;
        var safariWindow = window.open();

        jQuery.ajax({
            type: "POST",
            url: //URL,
            data: dataString,
            cache: true,
            success: function (data) {

                safariWindow.location.href = //URL;

                setTimeout(function () {

                    jQuery.ajax({
                        type: "GET",
                        url: //URL,
                        data: "fileName=" + data,
                        cache: true,
                        success: function () {
                            /* eslint-disable no-console */
                            console.log("Specification Deleted");
                            /* eslint-disable no-console */
                        },
                        error: function (data) {
                            /* eslint-disable no-console */
                            console.error("DELETING SPECIFICATION ERROR: " + data);
                            /* eslint-disable no-console */
                        }
                    });

                }, 21600);

            },
            error: function (data) {
                /* eslint-disable no-console */
                console.error("GENERATING SPECIFICATION ERROR: " + data);
                /* eslint-disable no-console */
            }
        });

    });

}
