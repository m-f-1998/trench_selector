/*global document*/
/*global basketProducts, selectedAdditions, percentDifference, waterPercentage:true, troughPercentage:true*/
/*exported waterPercentage, troughPercentage*/

var i, productString, currentAdditionalCosts, newFinalPrice, totalPercent, newBasePrice;

/* UPDATE TROUGH MATERIAL SELECTED */
function updateTroughMaterial(product, percent) { // eslint-disable-line no-unused-vars
    'use strict';
        
    productString = basketProducts[0][1].substring(13, 17);
    currentAdditionalCosts = parseFloat(
        document.getElementById("additionalCosts").innerHTML.substring(19, document.getElementById("additionalCosts").innerHTML.length)
    );
    
    selectedAdditions[0] = product.options[product.selectedIndex].text;
    productString = productString.replaceAt(0, product.value);
            
    for (i = 0; i < basketProducts.length; i += 1) {
        basketProducts[i][1] = basketProducts[i][1].replaceAt(13, productString);
    }
    
    var totalPercent, newBasePrice;
    totalPercent = parseFloat(troughPercentage) + parseFloat(waterPercentage);
    troughPercentage = percent;
    newBasePrice = percentDifference(totalPercent);
    
    newFinalPrice = parseFloat(
        currentAdditionalCosts
    ) + parseFloat(
        percentDifference(totalPercent)
    );
    
    document.getElementById("finalBasePrice").innerHTML = "Base Price: &#163;" + String(newBasePrice.toFixed(2));
    document.getElementById("finalEstimatedPrice").innerHTML = "Estimated Price: &#163;" + String(newFinalPrice.toFixed(2));

}

/* UPDATE CONNECTION OF WATER IN PRODUCT CODE */
function updateWaterConnection(product, waterPercent) { // eslint-disable-line no-unused-vars
    'use strict';
        
    /* GET CURRENT CUSTOMISATION STRING */
    productString = basketProducts[0][1].substring(15, 17);
    currentAdditionalCosts = parseFloat(
        document.getElementById("additionalCosts").innerHTML.substring(19, document.getElementById("additionalCosts").innerHTML.length)
    );
    
    selectedAdditions[2] = product.options[product.selectedIndex].text;
    productString = productString.replaceAt(0, product.value);
    
    /* REPLACE CODE WITH NEW SELECTION IN BASKET */
    for (i = 0; i < basketProducts.length; i += 1) {
        basketProducts[i][1] = basketProducts[i][1].replaceAt(15, productString);
    }
    
    totalPercent = parseFloat(troughPercentage) + parseFloat(waterPercentage);
    waterPercentage = waterPercent;
    newBasePrice = percentDifference(totalPercent);
    
    newFinalPrice = parseFloat(
        currentAdditionalCosts.toFixed(2)
    ) + parseFloat(
        document.getElementById("finalBasePrice").innerHTML.substring(13, document.getElementById("finalBasePrice").innerHTML.length)
    );
    
    document.getElementById("finalBasePrice").innerHTML = "Base Price: &#163;" + String(newBasePrice.toFixed(2));
    document.getElementById("finalEstimatedPrice").innerHTML = "Estimated Price: &#163;" + String(newFinalPrice.toFixed(2));
    
}